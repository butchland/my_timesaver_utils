---

title: Enhanced Image Classifier Cleaner


keywords: fastai
sidebar: home_sidebar

summary: "an enhanced version of the fastai image classifier cleaner "
description: "an enhanced version of the fastai image classifier cleaner "
nb_path: "nbs/03_enhanced_imageclassifiercleaner.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/03_enhanced_imageclassifiercleaner.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="EnhancedImageClassifierCleaner-Implementation">EnhancedImageClassifierCleaner Implementation<a class="anchor-link" href="#EnhancedImageClassifierCleaner-Implementation"> </a></h3><p>Import <code>fastai</code> widget dependencies and <code>fastcore</code> utility classes</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Implement default <code>file_mover</code> that moves files when recategorized or relabeled that works with <code>parent_label</code> as the <code>get_y</code> datablock parameter.<em>(This will not work with <code>RegexLabeller</code> since the label is not the parent directory)</em></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parent_move_file" class="doc_header"><code>parent_move_file</code><a href="https://github.com/butchland/my_timesaver_utils/tree/master/my_timesaver_utils/enhanced_imageclassifiercleaner.py#L12" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parent_move_file</code>(<strong><code>fn</code></strong>, <strong><code>newcat</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Implement the main widget <a href="/my_timesaver_utils/enhanced_imageclassifiercleaner.html#EnhancedImageClassifierCleaner"><code>EnhancedImageClassifierCleaner</code></a> widget which in turn is based on the fastai <code>ImageClassifierCleaner</code> widget.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="EnhancedImageClassifierCleaner" class="doc_header"><code>class</code> <code>EnhancedImageClassifierCleaner</code><a href="https://github.com/butchland/my_timesaver_utils/tree/master/my_timesaver_utils/enhanced_imageclassifiercleaner.py#L22" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>EnhancedImageClassifierCleaner</code>(<strong><code>learn</code></strong>, <strong><code>file_mover</code></strong>=<em><code>parent_move_file</code></em>, <strong><code>opts</code></strong>=<em><code>()</code></em>, <strong><code>height</code></strong>=<em><code>128</code></em>, <strong><code>width</code></strong>=<em><code>256</code></em>, <strong><code>max_n</code></strong>=<em><code>30</code></em>) :: <code>GetAttr</code></p>
</blockquote>
<p>Inherit from this to have all attr accesses in <code>self._xtra</code> passed down to <code>self.default</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-Instructions">Usage Instructions<a class="anchor-link" href="#Usage-Instructions"> </a></h3><blockquote><p>The images are segregated into <strong>Train</strong> and <strong>Valid</strong> datasets and are 
further segregated by category.</p>
<p>The images shown by the cleaner are ordered by the model's uncertainty.
The images where the classifier is least confident about is shown first, and
a total of the top 30 images (in order of least confidence) is listed (the theory 
being, that the images where the classifier most probably got it wrong are the ones
where it was least confident about).</p>
<p>So after either selecting some images for deletion or changing their categories, You can
click to the <code>Apply</code> button to apply the changes, or click on <code>Reset</code> to revert all your
pending changes.</p>
<p>When cleaning your data, make sure to check on all categories for both <strong>Train</strong> and <strong>Valid</strong> datasets, and
click on the <code>Apply</code> button to finalize the changes to your dataset.</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cleaner</span> <span class="o">=</span> <span class="n">EnhancedImageClassifierCleaner</span><span class="p">(</span><span class="n">learn</span><span class="p">)</span>
<span class="n">cleaner</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/my_timesaver_utils/images/enhanced-image-classifiercleaner.png" alt="pic of enhanced-image-classifier-cleaner widget"></p>

</div>
</div>
</div>
</div>
 

